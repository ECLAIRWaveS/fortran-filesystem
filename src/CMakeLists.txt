set_directory_properties(PROPERTIES LABELS pathlib)

target_sources(pathlib PRIVATE pathlib.f90 pure.f90 pure_iter.f90 impure.f90 envvar.f90)
if(WIN32)
  target_sources(pathlib PRIVATE windows_crt.f90 windows_path.f90 windows_sys.f90)
else()
  target_sources(pathlib PRIVATE posix_crt.f90 posix_path.f90 posix_sys.f90)
endif()
if(CMAKE_Fortran_COMPILER_ID STREQUAL GNU)
  target_sources(pathlib PRIVATE gcc.f90)
elseif(CMAKE_Fortran_COMPILER_ID MATCHES "^Intel")
  target_sources(pathlib PRIVATE intel.f90)
else()
  target_sources(pathlib PRIVATE dummy_compiler.f90)
endif()
